# â¤ï¸ å¤„ç†å¯¹è±¡
## ğŸ’› å¦‚ä½•åˆ›å»ºå¯¹è±¡
### ğŸ’™ é¿å…åˆ›å»ºä¸å¿…è¦å¯¹è±¡
- ä¸å¯å˜å¯¹è±¡æ€»æ˜¯å¯ä»¥å¤ç”¨
```java
// âŒ
String s = new String("123");
// âœ”ï¸
String s = "123";
```

---

- å¯¹äºé¢‘ç¹éœ€è¦åˆ›å»ºçš„å¯¹è±¡ï¼Œæˆ‘ä»¬åº”è¯¥ç¼“å­˜ï¼Œæ¯”å¦‚ ~~Jackson çš„ objectMapperï¼ŒOKHttp çš„ OKHttpClient~~
- ä¼˜å…ˆä½¿ç”¨åŸºæœ¬ç±»å‹ï¼Œè€Œä¸æ˜¯å°è£…ç±»

### ğŸ’™ å°½é‡é¿å… JavaBeans æ¨¡å¼åˆ›å»ºå¯¹è±¡
JavaBeans æ¨¡å¼æ˜¯é€šè¿‡æ— å‚æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡ï¼Œç„¶åä½¿ç”¨ setter æ–¹æ³•é€ä¸ªè®¾ç½®å±æ€§

```java
NutritionFacts cocaCola = new NutritionFacts();
cocaCola.setServingSize(240);
cocaCola.setServings(8);
cocaCola.setCalories(100);
```

<u>ç¼ºç‚¹</u> ï¼š
- ç”±äºå¯¹è±¡çš„æ„é€ è¿‡ç¨‹è¢«æ‹†åˆ†ä¸ºå¤šä¸ªæ­¥éª¤ï¼Œåœ¨æ‰€æœ‰å±æ€§è®¾ç½®å®Œæˆä¹‹å‰ï¼ŒJavaBean å¯èƒ½å¤„äºä¸å®Œæ•´æˆ–ä¸ä¸€è‡´çš„çŠ¶æ€ã€‚è¿™ä¸ªçŠ¶æ€ä¸‹ï¼ŒæŸäº›æ“ä½œå¯èƒ½ä¾èµ–äºå°šæœªè®¾ç½®çš„å±æ€§ï¼Œä»è€Œå¯¼è‡´å¯¹è±¡åœ¨ä½¿ç”¨æ—¶è¡Œä¸ºå¼‚å¸¸æˆ–å¤±è´¥
- æ— æ³•å¯¹å¤šä¸ªå±æ€§åšæœ‰æ•ˆæ€§æ£€æŸ¥

### ğŸ’™ é™æ€å·¥å‚

> [!quote] é™æ€å·¥å‚
> é™æ€å·¥å‚ å°±æ˜¯åœ¨ç±»ä¸­å£°æ˜ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºå¯¹è±¡

- `from` ç±»å‹è½¬æ¢æ–¹æ³•ï¼Œç”¨äºå°†æŸä¸ªç±»å‹çš„å€¼è½¬æ¢æˆç›®æ ‡ç±»å‹çš„å®ä¾‹ã€‚é€šå¸¸ç”¨äºå°†ä¸€ä¸ªå·²æœ‰çš„å¯¹è±¡æˆ–å€¼è½¬æ¢ä¸ºå¦ä¸€ç§è¡¨ç¤ºå½¢å¼çš„å¯¹è±¡
```java
Date d = Date.from(instant);
```

- `of` èšåˆæ–¹æ³•ï¼Œç”¨äºåˆ›å»ºåŒ…å«å¤šä¸ªå‚æ•°çš„å®ä¾‹
```java
Set<Rank> faceCards = EnumSet.of(JACK, QUEEN, KING);
```

- `valueOf` è¿™æ˜¯ä¸€ä¸ª**æ›´ä¸ºè¯¦ç»†**çš„å¯é€‰æ–¹æ¡ˆï¼Œç”¨äºä»ç»™å®šçš„å€¼åˆ›å»ºç›¸åº”çš„å¯¹è±¡
```java
BigInteger prime = BigInteger.valueOf(Integer.MAX_VALUE);
```

---

- `getInstance`Â è·å–ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å®ä¾‹
```java
StackWalker luke = StackWalker.getInstance(options);
```
    
- `newInstance`Â æ¯æ¬¡è°ƒç”¨éƒ½è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹
```java
Object newArray = Array.newInstance(classObject, arrayLen);
```


### ğŸ’™ Builder æ¨¡å¼
- åˆ›å»ºæ‹¥æœ‰ Builder æ¨¡å¼çš„ç±»
```java
public abstract class Pizza {
    // é…æ–™æšä¸¾
    public enum Topping {
        HAM, MUSHROOM, ONION, PEPPER, SAUSAGE
    }
    final Set<Topping> toppings;

    abstract static class Builder<T extends Builder<T>> {
        // åˆ›å»ºä¸€ä¸ªç©ºçš„ï¼Œä¸“é—¨ç”¨äºå­˜æ”¾é…æ–™æšä¸¾çš„é›†åˆ
        EnumSet<Topping> toppings = EnumSet.noneOf(Topping.class);

        public T addTopping(Topping topping) {
            toppings.add(Objects.requireNonNull(topping));
            return self();
        }

        // è¿™ä¸¤ä¸ªæ–¹æ³•å­ç±»å¿…é¡»é‡å†™ï¼Œæ‰€ä»¥å®šä¹‰ä¸ºæŠ½è±¡æ–¹æ³•
        abstract Pizza build();  // è®©å­ç±»åˆ›å»ºè‡ªå·±çš„å®ä¾‹ï¼Œè‡ªå·±newå‡ºæ¥
        protected abstract T self();  // ä¸ºäº†è®©å­ç±»è°ƒç”¨addTopping()æ–¹æ³•ï¼Œèƒ½è¿”å›å­ç±»è‡ªå·±çš„å®ä¾‹
    }

    Pizza(Builder<?> builder) {
        toppings = builder.toppings.clone();
    }
}
```

- å­ç±»
```java
public class NyPizza extends Pizza {
    public enum Size {SMALL, MEDIUM, LARGE}

    private final Size size;

    @AllArgsConstructor
    public static class Builder extends Pizza.Builder<Builder> {
        private final Size size;

        @Override
        public NyPizza build() {
            return new NyPizza(this);
        }

        @Override
        protected Builder self() {
            return this;
        }
    }

    private NyPizza(Builder builder) {
        super(builder);
        size = builder.size;
    }
}
```

- ä½¿ç”¨
```java
NyPizza pizza = new NyPizza.Builder(SMALL)
                           .addTopping(SAUSAGE)
                           .addTopping(ONION)
                           .build();
```

## ğŸ’› å•ä¾‹æ¨¡å¼
<u>è®¾è®¡å•ä¾‹æ¨¡å¼æ—¶ï¼Œè¦æŠŠå…¶æ„é€ æ–¹æ³•è®¾ä¸ºç§æœ‰ï¼Œè¿™æ ·å°±ä¸èƒ½å®ä¾‹åŒ–è¿™ä¸ªç±»ï¼Œä¹Ÿä¿è¯å…¶å­ç±»ä¹Ÿä¸èƒ½å®ä¾‹åŒ–</u>

```java
public class Elvis {
	public static final Elvis INSTANCE = new Elvis();
	
	private Elvis(){}
}
```

---

<u>å¦‚æœç±»å®ç°äº†åºåˆ—åŒ–æ¥å£ï¼Œè¿˜è¦é¢å¤–é‡å†™ readResolve() æ–¹æ³•</u> ï¼š

```java
// JVM åœ¨ååºåˆ—åŒ–æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³•
@Serial
private Object readResolve() {
	return INSTANCE;
}
```

---

<u>æšä¸¾æ˜¯å®ç°å•ä¾‹çš„æœ€ä½³æ–¹å¼</u> ï¼š
- å®ç°ç®€å•
- æšä¸¾æœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸éœ€è¦é¢å¤–çš„åŒæ­¥å¤„ç†
- æšä¸¾ç±»å‹å¤©ç”Ÿæ”¯æŒåºåˆ—åŒ–ï¼Œæ— éœ€å®ç°Â `Serializable`Â æ¥å£ï¼Œä¹Ÿä¸ä¼šå‡ºç°ååºåˆ—åŒ–åˆ›å»ºæ–°å®ä¾‹çš„é—®é¢˜
- æšä¸¾ç±»å‹ç”± JVM ä¿è¯ï¼Œåå°„æ— æ³•åˆ›å»ºæ–°çš„å®ä¾‹

```java
public enum Singleton {  
    // å®šä¹‰ä¸€ä¸ªæšä¸¾å®ä¾‹  
    INSTANCE;  
  
    // æ„é€ å‡½æ•°  
    Singleton() { â€¦â€¦ }  
  
    // è·å–æšä¸¾å®ä¾‹  
    public static Singleton getInstance() { 
        return INSTANCE;  
    }  
    
	public void someMethod() { // å®ç°å…·ä½“åŠŸèƒ½ }
}
```

```java
// ä½¿ç”¨
Singleton instance = Singleton.INSTANCE; 
instance.someMethod();
```

## ğŸ’› é”€æ¯å¯¹è±¡

> [!NOTE] å†…å­˜æ³„æ¼é€šå¸¸ä¸ä¼šè¡¨ç°ä¸ºæ˜æ˜¾çš„æ•…éšœï¼Œæ‰€ä»¥å¯èƒ½ä¼šåœ¨ä¸€ä¸ªç³»ç»Ÿä¸­å­˜åœ¨å¾ˆå¤šå¹´

<u>è¦åŠæ—¶æ¸…é™¤è¿‡æœŸçš„å¯¹è±¡å¼•ç”¨</u> ï¼š
- æˆ‘ä»¬åº”è¯¥åšåˆ°å°½é‡ç¼©å°å˜é‡çš„ä½œç”¨åŸŸï¼Œè®©å˜é‡éšä½œç”¨åŸŸçš„ç»“æŸè€Œç»“æŸ
- å¦‚æœè¿™ä¸ªå˜é‡çš„ä½œç”¨åŸŸå¾ˆå¤§ï¼Œæˆ‘ä»¬è¦é¿å…ç»´æŠ¤è¿™ä¸ªå˜é‡ï¼ˆå¯¹è±¡çš„å¼•ç”¨ï¼‰ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡æˆ‘ä»¬ä¸å†éœ€è¦äº†ï¼Œæˆ‘ä»¬è¦å°†æŒ‡å‘è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ç½®ä¸º nullã€‚~~å¦‚æœä¸€ç›´å¼•ç”¨ç€ï¼Œåƒåœ¾å›æ”¶å™¨å°†ä¸ä¼šå¯¹å…¶è¿›è¡Œå›æ”¶~~

---

<u>ç”¨ WeakHashMap ä»£æ›¿ HashMap æ¥æ¸…ç†æ— ç”¨çš„å¼±å¼•ç”¨ key</u> ï¼š
- åœ¨ `HashMap` ä¸­ï¼Œé”®å€¼å¯¹çš„é”®å¯¹è±¡ä¼šä¸€ç›´æŒæœ‰å¼ºå¼•ç”¨ï¼Œè¿™å°±æ„å‘³ç€å³ä½¿å¤–éƒ¨ä»£ç ä¸å†éœ€è¦è¿™ä¸ªå¯¹è±¡ï¼Œå®ƒä¾ç„¶ä¼šå­˜åœ¨äºç¼“å­˜ä¸­
- åœ¨ `WeakHashMap` ä¸­ï¼Œå¦‚æœç¼“å­˜ä¸­æŸä¸ªå¯¹è±¡çš„ key ä¸å†è¢«å…¶ä»–åœ°æ–¹å¼ºå¼•ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±ä¼šè‡ªåŠ¨è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼Œ~~åªæœ‰å½“ç¼“å­˜å¤–éƒ¨è¿˜æœ‰å¯¹è¯¥å¯¹è±¡çš„å¼ºå¼•ç”¨æ—¶ï¼Œå®ƒæ‰ä¼šç»§ç»­å­˜åœ¨äºç¼“å­˜ä¸­~~

```java
// åˆ›å»ºä¸€ä¸ªWeakHashMapç¼“å­˜
Map<String, String> cache = new WeakHashMap<>();
cache.put(new String("exampleKey"), "exampleValue");

// keyé€šè¿‡å¼±å¼•ç”¨å­˜å‚¨åœ¨cacheä¸­ï¼Œä½†æ˜¯æ­¤æ—¶gcè¿˜æ²¡æœ‰æ‰§è¡Œ
System.out.println("Before GC: " + cache);
// æœ‰ä¸€ä¸ªå¼ºå¼•ç”¨æŒ‡å‘ key
String externalKeyReference = key;
// æ¸…é™¤å¼ºå¼•ç”¨
key = null;

// æ‰‹åŠ¨è°ƒç”¨åƒåœ¾å›æ”¶å™¨
System.gc();

// æ£€æŸ¥ç¼“å­˜ï¼Œå‘ç°ä¸å­˜åœ¨é”®å€¼å¯¹
System.out.println("After GC: " + cache);
```

---

 `LinkedHashMap` <u> æ›¿ä»£</u> `HashMap` ï¼Œ<u>åœ¨æ·»åŠ æ–°é”®å€¼å¯¹æ—¶ï¼Œæ£€æŸ¥æ˜¯å¦è¦åˆ é™¤æœ€æ—§çš„é”®å€¼å¯¹</u>

```java
// LRU - Least Recentyly Used æœ€è¿‘æœ€å°‘ä½¿ç”¨
public class LRUCache<K, V> extends LinkedHashMap<K, V> {
    private final int maxSize;

    // æ„é€ å‡½æ•°ï¼ŒæŒ‡å®šç¼“å­˜çš„æœ€å¤§å®¹é‡
    public LRUCache(int maxSize) {
        super(maxSize, 0.75f, true); // è®¾ç½®è®¿é—®é¡ºåºä¸º true
        this.maxSize = maxSize;
    }

    // è¦†ç›– removeEldestEntry æ–¹æ³•
    @Override
    protected boolean removeEldestEntry(Map.Entry<K, V> eldest) {
        // å½“ç¼“å­˜å¤§å°è¶…è¿‡æœ€å¤§å®¹é‡æ—¶ï¼Œåˆ é™¤æœ€æ—§çš„å…ƒç´ 
        return size() > maxSize;
    }
}
```

```java
// åˆ›å»ºä¸€ä¸ªå®¹é‡ä¸º 3 çš„ LRU ç¼“å­˜
LRUCache<Integer, String> cache = new LRUCache<>(3);
cache.put(1, "One");
cache.put(2, "Two");
cache.put(3, "Three");

System.out.println("åˆå§‹é›†åˆ : " + cache);

// æ·»åŠ æ–°çš„å…ƒç´ ï¼Œåˆ é™¤ 1
cache.put(4, "Four");
System.out.println("æ–°å¢4 : " + cache);

// è®¿é—®ä¸€ä¸ªå…ƒç´ ï¼Œä½¿å…¶å˜ä¸ºæœ€è¿‘ä½¿ç”¨çš„å…ƒç´ 
cache.get(2);

// æ·»åŠ æ–°çš„å…ƒç´ ï¼Œåˆ é™¤3
cache.put(5, "Five");
System.out.println("æ–°å¢5 : " + cache);
```

---

<u>ç›‘å¬å™¨å’Œå…¶ä»–å›è°ƒä¸­å¯èƒ½å¼•å‘å†…å­˜æ³„æ¼</u> : 

å¦‚æœä½ å®ç°äº†ä¸€ä¸ª APIï¼Œå®¢æˆ·ç«¯æ³¨å†Œäº†å›è°ƒï¼Œä½†æ˜¯æ²¡æœ‰æ˜¾å¼åœ°æ³¨é”€ï¼Œé™¤éä½ é‡‡å–ä¸€äº›æªæ–½ï¼Œå¦åˆ™è¿™äº›å›è°ƒå¯¹è±¡å°±ä¼šä¸æ–­ç´¯ç§¯èµ·æ¥ã€‚ç¡®ä¿å›è°ƒåŠæ—¶è¢«åƒåœ¾æ”¶é›†å¤„ç†çš„ä¸€ä¸ªæ–¹æ³•æ˜¯åªå­˜å‚¨å¯¹å®ƒä»¬çš„å¼±å¼•ç”¨ï¼ˆweak referenceï¼‰ï¼Œä¾‹å¦‚ï¼Œå°†å…¶ä»…ä½œä¸º WeakHashMap ä¸­çš„é”®æ¥å­˜å‚¨ã€‚


# â¤ï¸ æ–¹æ³•
<u>è®¾è®¡æ–¹æ³•æ—¶ï¼Œåº”è¯¥è®©è¿™ä¸ªæ–¹æ³•å°½å¯èƒ½çš„é€šç”¨</u>ï¼ˆ~~ä¼ é€’ä»»ä½•å‚æ•°è¿›æ¥éƒ½èƒ½åˆç†åœ°å¤„ç†~~ï¼‰

---

<u>æˆ‘ä»¬åº”è¯¥åœ¨æ–¹æ³•çš„å¼€å¤´å°±æ ¡éªŒæ–¹æ³•çš„å…¥å‚æ˜¯å¦åˆç†ï¼Œå°½æ—©åœ°æš´éœ²å‡ºä¸åˆæ³•çš„å‚æ•°</u>


# â¤ï¸ api è®¾è®¡
è®¾è®¡ç±»ä¸­çš„çŠ¶æ€ä¾èµ–æ–¹æ³•ï¼ˆç±»ä¼¼è¿­ä»£å™¨ä¸­çš„ next æ–¹æ³•ï¼‰ å’ŒçŠ¶æ€æµ‹è¯•æ–¹æ³•ï¼ˆç±»ä¼¼è¿­ä»£å™¨ä¸­çš„ hasNext æ–¹æ³•ï¼‰çš„å‡†åˆ™ ï¼š
- å¦‚æœè¯¥å¯¹è±¡åœ¨å¹¶å‘ä¸‹ï¼Œå¯èƒ½å¯¼è‡´çŠ¶æ€ä¾èµ–æ–¹æ³•å’ŒçŠ¶æ€æµ‹è¯•æ–¹æ³•ä¸ä¸€è‡´ï¼ˆhasNext è¿”å› trueï¼Œä½†æ˜¯ next æ—¶åˆæ²¡æœ‰ï¼‰ï¼Œé‚£æ­¤æ—¶åº”è¯¥åˆå¹¶è¿™ä¸¤ä¸ªæ“ä½œä¸º nextIfAvailable æ–¹æ³•ï¼ˆè¿”å› Optionalï¼‰
- å¦‚æœè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½éœ€è¦åšç›¸åŒçš„æ“ä½œï¼ˆæ¯”å¦‚æ£€æŸ¥ â€¦â€¦ï¼‰ï¼Œé‚£ä¹Ÿåº”è¯¥åˆå¹¶è¿™ä¸¤ä¸ªæ“ä½œ
- å…¶ä»–æƒ…å†µä¸‹ï¼Œéƒ½åº”è¯¥ä¾èµ–äºçŠ¶æ€æµ‹è¯•æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä¾èµ–äºè¿”å›å€¼ Optional








